<!DOCTYPE html>
<html>
  <head>
    <title>Socket.IO chat</title>
    <link rel="stylesheet" href="toggle.css">
  </head>
  <body>
    
    <div class="chat 1">
      <h1>Chat</h1>    
      <ul id="messages"></ul>
      <form id="form" action="">
        <input id="message-input" autocomplete="off" /><button id="send">Send</button>
      </form>
    </div>

    <div class="stats-wrapper">
      <div>Real Time block</div>
      <div>Attendies:102</div>
    </div>
    <div class="tabs">
      <div class="tab-item tab-item-1">Ask a questions</div>
    </div>
    <div class="control-wrapper">
      <div class="admin-panel">Admin Panel</div>
      <div class="control-item qa"> 
        <div>Ask a question</div>
        <label id="control-qa" class="switch">
          <input id="control-qa-input" type="checkbox" onclick="qaInput()">
          <span class="slider round"> </span>
        </label>
      </div>
    </div>
    <script src="/socket.io/socket.io.js"> </script>

    <script>
      var socket = io();

      var messages = document.getElementById('messages');
      var form = document.getElementById('form');
      var messageInput = document.getElementById('message-input');
      var checkboxInput = document.getElementById('control-qa-input');

      form.addEventListener('submit', function(e) {
        e.preventDefault();
        if (messageInput.value) {
          socket.emit('chat message', messageInput.value);
          messageInput.value = '';
        }
      });


      // Checkbox stuff
      function qaInput() {
      // Get the checkbox
      var checkBox = document.getElementById("control-qa-input");
      // If the checkbox is checked
      if (checkBox.checked == true){
      socket.emit('checkbox', 'block');
      checkboxInput.value = '';
        }
            //If it has been unchecked.
    else{
      socket.emit('checkbox', 'none');
      checkboxInput.value = '';
    }
      }

      var boxcheck = document.getElementById('checked');
      function transmitMessage() {
          socket.send( message.value );
      }

      // Define the 
      // on checkbox checked or soon toggled send toggle item message
      //

      var message = document.getElementById('message');
      function transmitMessage() {
          socket.send( message.value );
      }

      socket.on('checkbox', function(checkvalue) {
        console.log(checkvalue)
        for (let element of document.getElementsByClassName("tab-item-1")){
       element.style.display=checkvalue;
      }
      });

      socket.on('chat message', function(msg) {
        var item = document.createElement('li');
        item.textContent = msg;
        document.body.style.backgroundColor = msg;  
        messages.appendChild(item);
        window.scrollTo(0, document.body.scrollHeight);
      });


    </script>
  </body>
</html>